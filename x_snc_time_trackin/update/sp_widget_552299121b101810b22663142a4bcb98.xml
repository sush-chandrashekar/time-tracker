<?xml version="1.0" encoding="UTF-8"?><record_update table="sp_widget">
    <sp_widget action="INSERT_OR_UPDATE">
        <category>custom</category>
        <client_script><![CDATA[function($scope) {
  /* widget controller */
  var c = this;

  console.log(c.data.dailyTimeCard);
  console.log(c.data.hasRole);
  c.date =  moment(c.data.date).format("dddd, MMMM Do YYYY");
}]]></client_script>
        <controller_as>c</controller_as>
        <css>.tt-home {
  h3{
    margin-bottom: 20px;
    font-weight: bold;
  }
    .home-btn {
      width:70%;
      height:50px;

      font-size: 24px;
      @media only screen and (min-device-width: 320px) and (max-device-width: 568px) and (-webkit-min-device-pixel-ratio: 2) {
        width:100%;
        height: 100px;
        margin-bottom: 30px;
        display: flex;
        align-items: center;
        justify-content: center;
      }

      p{
        margin-bottom: 0px;
      }
    }


}</css>
        <data_table>sp_instance</data_table>
        <demo_data/>
        <description/>
        <docs/>
        <field_list/>
        <has_preview>false</has_preview>
        <id>time_tracker_home</id>
        <internal>false</internal>
        <link><![CDATA[function link(scope, element, attrs, controller) {
  
}]]></link>
        <name>Time Tracker Home</name>
        <option_schema/>
        <public>false</public>
        <roles>x_snc_time_trackin.user</roles>
        <script><![CDATA[(function () {
  /* populate the 'data' object */
  /* e.g., data.table = $sp.getValue('table'); */

  // data.hasRole = new TimeTrackerUtil().hasRole('3d77e7791bd0d410b22663142a4bcb9f');
  // $sp.log(data.hasRole);
  // if (data.hasRole) {

    //var dateValue = new GlideDateTime();
    //dateValue = dateValue.getLocalDate();
    data.imt = $sp.getParameter('imt');
//$sp.log(dateValue);


    var gr = new GlideRecord('x_snc_time_trackin_time_tracker');
    gr.addQuery('parent', data.imt);
    gr.addQuery('user', gs.getUserID());
    gr.query();
    $sp.log(gr.getRowCount());
    if (gr.next()) {
      //gs.info(gr.getDisplayValue('u_parent'));
      //gs.info(gr.getDisplayValue('date'));
      //gs.info(gr.getDisplayValue('u_user'));
      //data.dailyTimeCard = gr.sys_id.toString();
      data.imt = gr.getValue('parent');
      data.imtName = gr.parent.name.getDisplayValue();

    }
  //}

})();]]></script>
        <servicenow>false</servicenow>
        <sys_class_name>sp_widget</sys_class_name>
        <sys_created_by>sush.chan</sys_created_by>
        <sys_created_on>2020-04-22 23:11:26</sys_created_on>
        <sys_id>552299121b101810b22663142a4bcb98</sys_id>
        <sys_mod_count>55</sys_mod_count>
        <sys_name>Time Tracker Home</sys_name>
        <sys_package display_value="Time Tracking" source="x_snc_time_trackin">54476f311b14d410b22663142a4bcbc6</sys_package>
        <sys_policy/>
        <sys_scope display_value="Time Tracking">54476f311b14d410b22663142a4bcbc6</sys_scope>
        <sys_update_name>sp_widget_552299121b101810b22663142a4bcb98</sys_update_name>
        <sys_updated_by>sush.chan</sys_updated_by>
        <sys_updated_on>2020-04-29 22:30:26</sys_updated_on>
        <template><![CDATA[<div class="col-md-12 text-center tt-home">
  <!-- our widget template -->
  <h3>Manage your hours for IMT {{data.imtName}}</h3>
  <div class="text-center col-md-12" >
    <a ng-href="?id=time_tracking_clock_in&imt={{c.data.imt}}" class="home-btn btn btn-primary"><p>Clock in/out</p></a>
    <a ng-href="?id=time_tracking_days_review&imt={{c.data.imt}}" class="home-btn btn btn-primary"><p>Reveiw Timecard</p></a>
  </div>
  <!-- <div class="col-md-12 text-center" ng-if="!c.data.hasRole">
    <h4>Oops, looks like you dont have access to Time Tracker. Please contact your admin</h4>
  </div> -->
</div>]]></template>
    </sp_widget>
</record_update>
